(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{62:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n(16),o=n.n(r),i=n(1),s=n.n(i),u=n(61),c=n(2),a=n(38),l=n(9),p=n(7),f=n.n(p),v=n(12),b=n.n(v),d=n(17),y=n.n(d),h=n(18),m=n.n(h),g=n(34),O=n.n(g),w=n(35),E=n.n(w),j=n(23),P=n.n(j),k=n(19),x=n.n(k),D=n(45),I=n(0),M=n.n(I),S={id:M.a.oneOfType([M.a.string,M.a.number]).isRequired,onInteract:M.a.func},T={onMouseDown:M.a.func,onMouseMove:M.a.func,onMouseUp:M.a.func,onTouchStart:M.a.func,onTouchMove:M.a.func,onTouchEnd:M.a.func};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r,i=e.style,u=void 0===i?{}:i,c=b()(e,["x","y","style"]);return s.a.createElement(l.a,f()({style:R({position:"absolute",left:n,top:o},u)},c))};X.propTypes=R(R({},T),{},{x:M.a.number,y:M.a.number});var Y,L=R(R({},S),{},{x:M.a.number,y:M.a.number,style:M.a.object}),A=(Y=X,function(e){var t=e.onInteract,n=e.id,r=b()(e,["onInteract","id"]),u=Object(i.useState)(void 0),c=o()(u,2),a=c[0],l=c[1],p=function(e,t){var r={pageX:t.nativeEvent.pageX,pageY:t.nativeEvent.pageY,locationX:t.nativeEvent.locationX||t.nativeEvent.offsetX||0,locationY:t.nativeEvent.locationY||t.nativeEvent.offsetY||0},o="down"===e?r:a;return"up"===e&&l(void 0),"down"===e&&l(r),{id:n,type:e,event:t,positions:r,startPositions:o}};if("web"!==D.a.OS)return s.a.createElement(Y,f()({onTouchStart:function(e){return null==t?void 0:t(p("down",e))},onTouchMove:function(e){return null==t?void 0:t(p("move",e))},onTouchEnd:function(e){return null==t?void 0:t(p("up",e))}},e));var v=Object(i.useState)(!1),d=o()(v,2),y=d[0],h=d[1],m=function(e){y&&(h(!1),null==t||t(p("up",e)))};return Object(i.useEffect)((function(){var e=function(e){y&&(h(!1),null==t||t(p("up",{nativeEvent:e})))},n=function(e){y&&(null==t||t(p("move",{nativeEvent:e})))};return window.addEventListener("mouseup",e),window.addEventListener("mousemove",n),function(){window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",n)}}),[m]),s.a.createElement(Y,f()({},r,{onMouseDown:function(e){h(!0),null==t||t(p("down",e))},onMouseUp:m,onTouchStart:function(e){return null==t?void 0:t(p("down",e))},onTouchMove:function(e){return null==t?void 0:t(p("move",e))},onTouchEnd:function(e){e.preventDefault(),null==t||t(p("up",e))}}))});A.propTypes=L;var F=A,U=function(){function e(){var t=this;y()(this,e),this.subscribers=[],this.running=!1,this.loop=function(e){void 0!==t.loopId&&t.subscribers.forEach((function(t){t(e)})),t.loopId=requestAnimationFrame(t.loop)},this.subscribers=[],this.loopId=void 0}return m()(e,[{key:"start",value:function(){this.loopId||this.loop(Date.now()),this.running=!0}},{key:"stop",value:function(){this.loopId&&(cancelAnimationFrame(this.loopId),this.loopId=void 0),this.running=!1}},{key:"subscribe",value:function(e){-1===this.subscribers.indexOf(e)&&this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"isRunning",value:function(){return this.running}}]),e}(),W=Object(i.createContext)(null);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P()(e);if(t){var o=P()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E()(this,n)}}var H={entities:M.a.object,systems:M.a.array,timer:M.a.object},J=function(e){O()(n,e);var t=q(n);function n(e){var r,o;return y()(this,n),(o=t.call(this,e)).state={entities:{}},o.events=[],o.prevMs=0,o.timerHandler=function(e){var t,n={events:o.events,currentMs:e,deltaMs:e-o.prevMs},r=o.systems.reduce((function(e,t){return t(e,n)}),o.state.entities);o.events=[],o.setState({entities:r}),null==(t=o.timer)||t.stop(),o.prevMs=e},o.handleInteraction=function(e){o.events.push(e)},o.UNSAFE_componentWillReceiveProps=function(e){!1!==e.running?o.props.running!==e.running&&(o.events=[],o.timer.start()):o.timer.stop()},o.state.entities=e.entities||{},o.systems=null!=(r=e.systems)?r:[],o.timer=new U,o.timer.subscribe(o.timerHandler),!0===e.running&&o.timer.start(),o}return m()(n,[{key:"render",value:function(){var e=this;return s.a.createElement(W.Provider,{value:null},s.a.createElement(F,{id:"root"},Object.entries(this.state.entities).map((function(t){var n=o()(t,2),r=n[0],i=n[1],u=i.Component,c=b()(i,["Component"]);return s.a.createElement(u,f()({key:r,id:r,onInteract:e.handleInteraction},c))}))))}}]),n}(s.a.Component);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}J.propTypes=H;var z=function(e){var t=e.style,n=b()(e,["style"]);return s.a.createElement(F,f()({},n,{style:_({width:16,height:16,backgroundColor:"pink"},t)}))};z.propTypes=_(_({},L),{},{style:M.a.object});var B=z,G=function(e,t){return t.events.filter((function(e){return"move"===e.type})).forEach((function(t){var n=e[t.id];t.startPositions&&(n.x=t.positions.pageX-t.startPositions.locationX,n.y=t.positions.pageY-t.startPositions.locationY)})),e};function K(){var e=Object(i.useState)(!0),t=o()(e,2),n=t[0],r=t[1];return s.a.createElement(l.a,{style:Q.container},s.a.createElement(a.a,null,"Open up App.tsx to start working on your app!"),s.a.createElement(u.a,{title:n?"pause":"resume",onPress:function(){return r(!n)}}),s.a.createElement(J,{entities:{1:{x:50,y:50,style:{backgroundColor:"black"},Component:B},2:{x:200,y:200,style:{width:100,height:100,backgroundColor:"pink"},Component:F}},systems:[G],running:n}))}var Q=c.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},63:function(e,t,n){n(64),e.exports=n(91)},64:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[63,1,2]]]);
//# sourceMappingURL=app.c56756bb.chunk.js.map